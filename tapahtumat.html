<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tapahtumat Tampereella</title>
    <link rel="stylesheet" href="styles.css">
    
</head>
<body>
     <!-- Navigointipalkki -->
    <nav class="navbar">
        <div class="navbar-container">
            <ul class="navbar-links">
                <li><a href="index.html" class="navbar-link">Etusivu</a></li>
                <li><a href="toteutus.html" class="navbar-link">Toteutus</a></li>
                <li><a href="tapahtumat.html" class="navbar-link">Tapahtumat</a></li>
                <li><a href="saa.html" class="navbar-link">Sää</a></li>
            </ul>
        </div>
    </nav>
    

    <h1>Tampereella tapahtuu</h1>
    <div id="vastaus"></div>

<script>
  // Haetaan Tampereen tapahtumat
  fetch('https://api.visittampere.com/api/v1/visittampere/event/published/all/?format=json&lang=fi')
    .then(response => response.json())
    .then(data => {
      // Debugging: tulostetaan data konsoliin
      console.log(data);

      // Käydään läpi data ja näytetään tapahtumat
      tapahtumat(data);
    })
    .catch(error => {
      document.getElementById("vastaus").innerHTML = "<p>Tietoa ei pystytä hakemaan</p>" + error;
    });

  // Funktio tapahtumien näyttämiseen
  function tapahtumat(data) {
    let teksti = "";

    // Käydään läpi kaikki tapahtumat ja luodaan HTML sisältö
    data.forEach(event => {
      // Debugging: tarkistetaan jokainen tapahtuma
      console.log(event);

      // Tässä käytämme 'title', 'description' ja 'url' kenttiä, kuten konsoliloki osoittaa
      teksti += `
        <div class="event">
          <h3>${event.title}</h3> <!-- Käytetään title-kenttää -->
          <p>${event.description}</p> <!-- Käytetään description-kenttää -->
          <p><a href="${event.url}" target="_blank">Lisätietoa</a></p> <!-- Käytetään url-kenttää -->
        </div>
      `;
    });

    // Asetetaan luotu sisältö vastaus-elementtiin
    document.getElementById("vastaus").innerHTML = teksti;
  }
</script>
</body>
</html>
